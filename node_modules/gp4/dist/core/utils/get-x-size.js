import { Buffer } from 'node:buffer';
import { promisify } from 'node:util';
import is from '@sindresorhus/is';
import isFormData from './is-form-data.js';
export default async function getXSize(x, headers) {
    if (headers && 'content-length' in headers) {
        return Number(headers['content-length']);
    }
    if (!x) {
        return 0;
    }
    if (is.string(x)) {
        return Buffer.byteLength(x);
    }
    if (is.buffer(x)) {
        return x.length;
    }
    if (isFormData(x)) {
        return promisify(x.getLength.bind(x))();
    }
    return undefined;
}
